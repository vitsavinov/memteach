!function(e){var t={};function s(l){if(t[l])return t[l].exports;var r=t[l]={i:l,l:!1,exports:{}};return e[l].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=t,s.d=function(e,t,l){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:l})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var l=Object.create(null);if(s.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(l,r,function(t){return e[t]}.bind(null,r));return l},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class l{constructor(e){this._element=e}cardShow(e){e.classList.remove("hide")}cardHide(e){e.classList.add("hide")}cardDrop(e){for(;e.lastChild.classList.length>0;)e.removeChild(e.lastChild)}on(e,t,s){e.addEventListener(t,s)}trigger(e,t){let s=new CustomEvent(t,{detail:e});e.dispatchEvent(s)}}class r extends l{constructor(){super(),this._cardsRegistry=[],this.counter=36,this.clicks=0,this.startFlag=!1,this.stopFlag=!1,this.clickCounter=document.querySelector('[data-component="counter"]'),this.clickCounter.innerText="Clicks: "+this.clicks.toString(),this.logName=document.querySelector('[data-component="login-name"]'),this.logPass=document.querySelector('[data-component="login-password"]'),this.regName=document.querySelector('[data-component="register-name"]'),this.regEmail=document.querySelector('[data-component="register-email"]'),this.regCountry=document.querySelector('[data-component="register-country"]'),this.regPass1=document.querySelector('[data-component="register-password1"]'),this.regPass2=document.querySelector('[data-component="register-password2"]')}cardCheck(e,t){if(this.startFlag||(this.startFlag=!0),'<img src="./img/card-empty.jpg">'!==e.innerHTML)if(this.stopFlag||(this.clicks++,this.clickCounter.innerText="Clicks: "+this.clicks.toString()),0===this._cardsRegistry.length)this._cardsRegistry.push(e),this.cardShow(e.lastChild);else if(1===this._cardsRegistry.length){if(this._cardsRegistry[0]!==e&&(this._cardsRegistry.push(e),this.cardShow(e.lastChild),t[this._cardsRegistry[0].id].id===t[this._cardsRegistry[1].id].id)){let e=this._cardsRegistry[0],t=this._cardsRegistry[1];this._cardsRegistry.length=0,setTimeout(()=>{this.cardDrop(e),this.cardDrop(t),this.counter-=2,0===this.counter&&(this.stopFlag=!0)},200)}}else 2===this._cardsRegistry.length&&(this.cardHide(this._cardsRegistry[0].lastChild),this.cardHide(this._cardsRegistry[1].lastChild),this._cardsRegistry.length=0,this.cardShow(e.lastChild),this._cardsRegistry.push(e))}openLoginForm(e,t){t.querySelector('[data-component="counter"]').style.display="none",t.querySelector('[data-component="auth-buttons"]').style.display="none",t.querySelector('[data-component="login-form"]').style.display="inline-block"}openRegisterForm(e,t){t.querySelector('[data-component="counter"]').style.display="none",t.querySelector('[data-component="auth-buttons"]').style.display="none",t.querySelector('[data-component="register-form"]').style.display="inline-block"}closeLoginForm(e,t){console.log(""),console.log("Login form was forced"),console.log("Name: ",this.logName.value),console.log("Password: ",this.logPass.value),0===this.logName.value.length&&alert("Login name is required"),0===this.logName.value.length&&alert("Password is required"),t.querySelector('[data-component="login-form"]').style.display="none",t.querySelector('[data-component="counter"]').style.display="inline-block",t.querySelector('[data-component="auth-buttons"]').style.display="inline-block"}closeRegisterForm(e,t){console.log("Register form was forced"),console.log("Name: ",this.regName.value),console.log("Email: ",this.regEmail.value),console.log("Country: ",this.regCountry.value),console.log("Password 1: ",this.regPass1.value),console.log("Password 2: ",this.regPass2.value),0===this.regName.value.length&&alert("Nickname is required"),0===this.regEmail.value.length&&alert("E-mail is required"),0===this.regPass1.value.length&&alert("Password is required"),0===this.regPass2.value.length&&alert("Repeating password is required");let s=this.regEmail.value,l=this.regPass1.value;this.firebase.auth().createUserWithEmailAndPassword(s,l).catch((function(e){console.log(e.code),console.log(e.message)})),t.querySelector('[data-component="register-form"]').style.display="none",t.querySelector('[data-component="counter"]').style.display="inline-block",t.querySelector('[data-component="auth-buttons"]').style.display="inline-block"}}var o={get:e=>new Promise((function(t,s){let l=new XMLHttpRequest;l.open("GET",e,!0),l.onload=()=>{if(200==l.status){let e=JSON.parse(l.responseText);t(e)}else s(Error(l.statusText))},l.onerror=function(){s(Error(l.statusText))},l.send()}))};new class extends l{constructor({element:e}){super(e),this._element=e,this._cardslist=[],this._layout={"cell-1":{},"cell-2":{},"cell-3":{},"cell-4":{},"cell-5":{},"cell-6":{},"cell-7":{},"cell-8":{},"cell-9":{},"cell-10":{},"cell-11":{},"cell-12":{},"cell-13":{},"cell-14":{},"cell-15":{},"cell-16":{},"cell-17":{},"cell-18":{},"cell-19":{},"cell-20":{},"cell-21":{},"cell-22":{},"cell-23":{},"cell-24":{},"cell-25":{},"cell-26":{},"cell-27":{},"cell-28":{},"cell-29":{},"cell-30":{},"cell-31":{},"cell-32":{},"cell-33":{},"cell-34":{},"cell-35":{},"cell-36":{}},this._cardservice=new r,o.get("./data/cards.json").then(e=>{this._cardslist=e,this._shuffle(this._layout,this._cardslist),this._fillTable(),this._bindAuthButtons()},e=>{console.log(e)})}_getRandomInRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}_shuffle(e,t){let s=[],l=[];for(let t in e)s.push(t);t.forEach(e=>{l.push(e)});let r=s.length;for(;r;){let t=l.pop(),o=0,i="";o=this._getRandomInRange(0,r-1),i=s[o],e[i]=t,s.splice(o,1),r=s.length,o=this._getRandomInRange(0,r-1),i=s[o],e[i]=t,s.splice(o,1),r=s.length}}_fillTable(){let e="",t={};for(let s in this._layout)e=`<img class="card-face hide" src="${this._layout[s].imagePath}">`,t=this._element.querySelector("#"+s),t.innerHTML+=e,this.on(t,"click",e=>{this._cardservice.cardCheck(e.currentTarget,this._layout)})}_bindAuthButtons(){let e=this._element.querySelector("#btnLogin");this.on(e,"click",e=>{this._cardservice.openLoginForm(e.currentTarget,this._element)});let t=this._element.querySelector("#btnRegister");this.on(t,"click",e=>{this._cardservice.openRegisterForm(e.currentTarget,this._element)});let s=this._element.querySelector("#btnEnterLogin");this.on(s,"click",e=>{this._cardservice.closeLoginForm(e.currentTarget,this._element)});let l=this._element.querySelector("#btnEnterRegister");this.on(l,"click",e=>{this._cardservice.closeRegisterForm(e.currentTarget,this._element)})}}({element:document.querySelector('[data-component="card-table"]')})}]);