!function(e){var t={};function l(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,l),s.l=!0,s.exports}l.m=e,l.c=t,l.d=function(e,t,r){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(l.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)l.d(r,s,function(t){return e[t]}.bind(null,s));return r},l.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="",l(l.s=0)}([function(e,t,l){"use strict";l.r(t);class r{constructor(e){this._element=e}cardShow(e){e.classList.remove("hide")}cardHide(e){e.classList.add("hide")}cardDrop(e){for(;e.lastChild.classList.length>0;)e.removeChild(e.lastChild)}on(e,t,l){e.addEventListener(t,l)}trigger(e,t){let l=new CustomEvent(t,{detail:e});e.dispatchEvent(l)}}class s extends r{constructor(){super(),this._cardsRegistry=[],this.counter=36,this.clicks=0,this.startFlag=!1,this.stopFlag=!1,this.stopwatch=document.querySelector('[data-component="counter"]'),this.stopwatch.innerText="Clicks: "+this.clicks.toString()}cardCheck(e,t){if(this.startFlag||(this.startFlag=!0),'<img src="./img/card-empty.jpg">'!==e.innerHTML)if(this.stopFlag||(this.clicks++,this.stopwatch.innerText="Clicks: "+this.clicks.toString()),0===this._cardsRegistry.length)this._cardsRegistry.push(e),this.cardShow(e.lastChild);else if(1===this._cardsRegistry.length){if(this._cardsRegistry[0]!==e&&(this._cardsRegistry.push(e),this.cardShow(e.lastChild),t[this._cardsRegistry[0].id].id===t[this._cardsRegistry[1].id].id)){let e=this._cardsRegistry[0],t=this._cardsRegistry[1];this._cardsRegistry.length=0,setTimeout(()=>{this.cardDrop(e),this.cardDrop(t),this.counter-=2,0===this.counter&&(this.stopFlag=!0)},200)}}else 2===this._cardsRegistry.length&&(this.cardHide(this._cardsRegistry[0].lastChild),this.cardHide(this._cardsRegistry[1].lastChild),this._cardsRegistry.length=0,this.cardShow(e.lastChild),this._cardsRegistry.push(e))}openLoginForm(e,t){t.querySelector('[data-component="counter"]').style.display="none",t.querySelector('[data-component="auth-buttons"]').style.display="none",t.querySelector('[data-component="login-form"]').style.display="inline-block"}openRegisterForm(e,t){t.querySelector('[data-component="counter"]').style.display="none",t.querySelector('[data-component="auth-buttons"]').style.display="none",t.querySelector('[data-component="register-form"]').style.display="inline-block"}closeLoginForm(e,t){t.querySelector('[data-component="login-form"]').style.display="none",t.querySelector('[data-component="counter"]').style.display="inline-block",t.querySelector('[data-component="auth-buttons"]').style.display="inline-block"}closeRegisterForm(e,t){t.querySelector('[data-component="register-form"]').style.display="none",t.querySelector('[data-component="counter"]').style.display="inline-block",t.querySelector('[data-component="auth-buttons"]').style.display="inline-block"}}var n={get:e=>new Promise((function(t,l){let r=new XMLHttpRequest;r.open("GET",e,!0),r.onload=()=>{if(200==r.status){let e=JSON.parse(r.responseText);t(e)}else l(Error(r.statusText))},r.onerror=function(){l(Error(r.statusText))},r.send()}))};new class extends r{constructor({element:e}){super(e),this._element=e,this._cardslist=[],this._layout={"cell-1":{},"cell-2":{},"cell-3":{},"cell-4":{},"cell-5":{},"cell-6":{},"cell-7":{},"cell-8":{},"cell-9":{},"cell-10":{},"cell-11":{},"cell-12":{},"cell-13":{},"cell-14":{},"cell-15":{},"cell-16":{},"cell-17":{},"cell-18":{},"cell-19":{},"cell-20":{},"cell-21":{},"cell-22":{},"cell-23":{},"cell-24":{},"cell-25":{},"cell-26":{},"cell-27":{},"cell-28":{},"cell-29":{},"cell-30":{},"cell-31":{},"cell-32":{},"cell-33":{},"cell-34":{},"cell-35":{},"cell-36":{}},this._cardservice=new s,n.get("./data/cards.json").then(e=>{this._cardslist=e,this._shuffle(this._layout,this._cardslist),this._fillTable(),this._bindAuthButtons()},e=>{console.log(e)})}_getRandomInRange(e,t){return Math.floor(Math.random()*(t-e+1))+e}_shuffle(e,t){let l=[],r=[];for(let t in e)l.push(t);t.forEach(e=>{r.push(e)});let s=l.length;for(;s;){let t=r.pop(),n=0,i="";n=this._getRandomInRange(0,s-1),i=l[n],e[i]=t,l.splice(n,1),s=l.length,n=this._getRandomInRange(0,s-1),i=l[n],e[i]=t,l.splice(n,1),s=l.length}}_fillTable(){let e="",t={};for(let l in this._layout)e=`<img class="card-face hide" src="${this._layout[l].imagePath}">`,t=this._element.querySelector("#"+l),t.innerHTML+=e,this.on(t,"click",e=>{this._cardservice.cardCheck(e.currentTarget,this._layout)})}_bindAuthButtons(){logBtn=this._element.querySelector("#btnLogin"),this.on(logBtn,"click",e=>{this._cardservice.openLoginForm(e.currentTarget,this._element)}),regBtn=this._element.querySelector("#btnRegister"),this.on(regBtn,"click",e=>{this._cardservice.openRegisterForm(e.currentTarget,this._element)}),entrLogBtn=this._element.querySelector("#btnEnterLogin"),this.on(entrLogBtn,"click",e=>{this._cardservice.closeLoginForm(e.currentTarget,this._element)}),entrRegBtn=this._element.querySelector("#btnEnterRegister"),this.on(entrRegBtn,"click",e=>{this._cardservice.closeRegisterForm(e.currentTarget,this._element)})}}({element:document.querySelector('[data-component="card-table"]')})}]);